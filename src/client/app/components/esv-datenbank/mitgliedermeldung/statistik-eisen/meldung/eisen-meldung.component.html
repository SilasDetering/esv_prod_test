<h1 style="margin-top: 50px;">Mitgliedermeldung</h1>
<button style="float: right" class="btn btn-outline-dark" [routerLink]="['/esv-statistik/menue/eisen']"> Zurück </button>

<div style="margin-top: 40px;">
    <h3>Neue Meldung</h3>

    <hr style="margin-bottom: 5px;">

    <form (ngSubmit)="onReportSubmit()">

        <div style="display: flex;">

            <!-- SELECT COMPANY -->
            <div style="flex: 1;">
                <label for="company-select" class="form-label mt-4">Unternehmen</label>
                <div class="form-group" style="max-width: 75%;">
                    <select class="form-select" id="company-select" [(ngModel)]="selectedMember" name="selectMember">
                        <option *ngFor="let memberOption of listOfMembers" [value]="memberOption.ID">
                            {{memberOption.name}}</option>
                    </select>
                </div>
            </div>

            <!-- SELECT DATE -->
            <div style="flex: 1; margin-left: 5px;">
                <div class="form-group" style="max-width: 75%;">
                    <label for="dateField" class="form-label mt-4">Datum</label>
                    <input type="date" class="form-control" id="dateField" [(ngModel)]="selectedDate" name="selectDate">
                </div>
            </div>

        </div>


        <!-- INLAND/EXPORT - REPORT -->
        <hr style="width: 25%;">
        <h5> Produkte Inland / Ausland </h5>

        <div style="margin-top: 20px;">
            <table>
                <thead>
                    <tr>
                        <td style="width: 40%;">
                            <h5>Produkt</h5>
                        </td>
                        <td style="width: 20%;">
                            <h5>Inland (in t)</h5>
                        </td>
                        <td style="width: 20%;">
                            <h5>Export (in t)</h5>
                        </td>
                    </tr>
                </thead>
                <tbody>
                    <tr class="col1">
                        <td> <label> Blumendraht </label> </td>
                        <td> <input type="number" class="form-control input" name="blumendraht_inland"
                                placeholder="Menge in t" [(ngModel)]="blumendraht_inland"></td>
                        <td> <input type="number" class="form-control input" name="blumendraht_export"
                                placeholder="Menge in t" [(ngModel)]="blumendraht_export"></td>
                    </tr>
                    <tr>
                        <td> <label> Flachdraht </label> </td>
                        <td> <input type="number" class="form-control input" name="flachdraht_inland"
                                placeholder="Menge in t" [(ngModel)]="flachdraht_inland"></td>
                        <td> <input type="number" class="form-control input" name="flachdraht_export"
                                placeholder="Menge in t" [(ngModel)]="flachdraht_export"></td>
                    </tr>
                    <tr class="col1">
                        <td> <label> Kettendraht </label> </td>
                        <td> <input type="number" class="form-control input" name="kettendraht_inland"
                                placeholder="Menge in t" [(ngModel)]="kettendraht_inland"></td>
                        <td> <input type="number" class="form-control input" name="kettendraht_export"
                                placeholder="Menge in t" [(ngModel)]="kettendraht_export"></td>
                    </tr>
                    <tr>
                        <td> <label> Nicht patentierte Stahldrähte </label> </td>
                        <td> <input type="number" class="form-control input" name="npStahldraehte_inland"
                                placeholder="Menge in t" [(ngModel)]="npStahldraehte_inland"></td>
                        <td> <input type="number" class="form-control input" name="npStahldraehte_export"
                                placeholder="Menge in t" [(ngModel)]="npStahldraehte_export"></td>
                    </tr>
                    <tr class="col1">
                        <td> <label> Nietendraht </label> </td>
                        <td> <input type="number" class="form-control input" name="nietendraht_inland"
                                placeholder="Menge in t" [(ngModel)]="nietendraht_inland"></td>
                        <td> <input type="number" class="form-control input" name="nietendraht_export"
                                placeholder="Menge in t" [(ngModel)]="nietendraht_export"></td>
                    </tr>
                    <tr>
                        <td> <label> Schraubendraht DIN EN 10.263 Teil 1 - 4 </label> </td>
                        <td> <input type="number" class="form-control input" name="schraubendraht_inland"
                                placeholder="Menge in t" [(ngModel)]="schraubendraht_inland"></td>
                        <td> <input type="number" class="form-control input" name="schraubendraht_export"
                                placeholder="Menge in t" [(ngModel)]="schraubendraht_export"></td>
                    </tr>
                    <tr class="col1">
                        <td> <label> Eisendrähte / blank, verkupfert </label> </td>
                        <td> <input type="number" class="form-control input" name="ed_blank_verkupfert_inland"
                                placeholder="Menge in t" [(ngModel)]="ed_blank_verkupfert_inland"></td>
                        <td> <input type="number" class="form-control input" name="ed_blank_verkupfert_export"
                                placeholder="Menge in t" [(ngModel)]="ed_blank_verkupfert_export"></td>
                    </tr>
                    <tr>
                        <td> <label> Eisendrähte / geglüht </label> </td>
                        <td> <input type="number" class="form-control input" name="ed_geglüht_inland"
                                placeholder="Menge in t" [(ngModel)]="ed_geglueht_inland"></td>
                        <td> <input type="number" class="form-control input" name="ed_geglüht_export"
                                placeholder="Menge in t" [(ngModel)]="ed_geglueht_export"></td>
                    </tr>
                    <tr class="col1">
                        <td> <label> Eisendrähte / verzinkt bis 6,0 mm ø </label> </td>
                        <td> <input type="number" class="form-control input" name="ed_verzinkt_bis_6_inland"
                                placeholder="Menge in t" [(ngModel)]="ed_verzinkt_bis_6_inland"> </td>
                        <td> <input type="number" class="form-control input" name="ed_verzinkt_bis_6_export"
                                placeholder="Menge in t" [(ngModel)]="ed_verzinkt_bis_6_export"> </td>
                    </tr>
                    <tr>
                        <td> <label> Eisendrähte / verzinkt üb. 6,0 mm ø </label> </td>
                        <td> <input type="number" class="form-control input" name="ed_verzinkt_ueber_6_inland"
                                placeholder="Menge in t" [(ngModel)]="ed_verzinkt_ueber_6_inland"> </td>
                        <td> <input type="number" class="form-control input" name="ed_verzinkt_ueber_6_export"
                                placeholder="Menge in t" [(ngModel)]="ed_verzinkt_ueber_6_export"> </td>
                    </tr>
                    <tr class="col1">
                        <td> <label> Eisendrähte / verzinnt </label> </td>
                        <td> <input type="number" class="form-control input" name="ed_verzinnt_inland"
                                placeholder="Menge in t" [(ngModel)]="ed_verzinnt_inland"></td>
                        <td> <input type="number" class="form-control input" name="ed_verzinnt_export"
                                placeholder="Menge in t" [(ngModel)]="ed_verzinnt_export"></td>
                    </tr>
                    <tr>
                        <td> <label> Eisendrähte / kunststoffummantelt </label> </td>
                        <td> <input type="number" class="form-control input" name="ed_kuststoffummantelt_inland"
                                placeholder="Menge in t" [(ngModel)]="ed_kuststoffummantelt_inland"> </td>
                        <td> <input type="number" class="form-control input" name="ed_kuststoffummantelt_export"
                                placeholder="Menge in t" [(ngModel)]="ed_kuststoffummantelt_export"> </td>
                    </tr>
                    <tr class="col1">
                        <td> <label> Stangendraht / blank, verkupfert, verzinkt </label> </td>
                        <td> <input type="number" class="form-control input" name="Stangendraht_inland"
                                placeholder="Menge in t" [(ngModel)]="stangendraht_inland"> </td>
                        <td> <input type="number" class="form-control input" name="Stangendraht_export"
                                placeholder="Menge in t" [(ngModel)]="stangendraht_export"> </td>
                    </tr>
                    <tr>
                        <td> <label> Sonstige Eisendrähte </label> </td>
                        <td> <input type="number" class="form-control input" name="sonstige_inland"
                                placeholder="Menge in t" [(ngModel)]="sonstige_inland"> </td>
                        <td> <input type="number" class="form-control input" name="sonstige_export"
                                placeholder="Menge in t" [(ngModel)]="sonstige_export"> </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- LÄNDER EXPORTE -->
        <hr style="width: 25%;">
        <h5 style="margin-bottom: 20px;"> Länderausfuhren </h5>

        <div class="col1" style="border-radius: 10px; margin-top: 2px; width: 60%;"
            *ngFor="let countryExport of exportedProducts; let i = index">
            <td style="width: 60%;">
                <select class="form-select" id="country-select" style="margin-left: 2px;"
                    [(ngModel)]="exportedProducts[i].countryID" [name]="exportedProducts[i].name">
                    <option *ngFor="let country of listOfCountries" [value]="country.countryID">{{country.name}}
                    </option>
                </select>
            </td>
            <td style="border: 0px; width: 60%;">
                <input type="number" class="form-control input" style="margin-left: 2px;" placeholder="Menge in t"
                    [(ngModel)]="exportedProducts[i].amount" [name]="'countryExp_amount_' + i">
            </td>
            <td style="border: 0px; width: 10%;">
                <button class="btn btn-outline-danger" style="margin-left: 150px;" id="deleteButton"
                    (click)="removeExportRep(i)"><b>&cross;</b></button>
            </td>
        </div>


        <button type="button" class="btn btn-outline-primary" (click)="addExportRep()"><b>+</b></button>

        <hr>

        <div style="display: flex; margin-top: 20px;">
            <!-- SUBMIT FORM -->
            <input type="submit" class="btn btn-primary" value="+ Eintrag hinzufügen" style="margin-right: 20px;">

            <!-- LOAD FILE -->
            <!--<input class="form-control" type="file" accept=".csv" id="fileInput"
                style="width: 30%; min-width: fit-content" name="insertedFile" disabled="true">-->
            <!-- (change)="handleFileInput($event)"--> 
        </div>

    </form>

    <h3 style="margin-top: 120px;">Vergangene Meldungen</h3>
    <hr>

    <div style="overflow: auto; max-height: 10cm; padding: 5px;">
        <table class="table">
          <tr *ngFor="let report of listOfLastRep">
            <div style="border-radius: 10px; background-color:rgb(11, 20, 53); margin-top: 2px;">
              <td style="border: 0px; width: 20%; font-size: larger;">{{report.reportDate}}</td>
              <td style="border: 0px; width: 80%; font-size: larger;">{{report.companyID}}</td>
              <td style="border: 0px;">
                <button class="btn btn-outline-secondary" style="margin-left: 150px;" id="deleteButton"
                  (click)="redirectToReportView(report)">🔎</button>
              </td>
              <td style="border: 0px;">
                <button class="btn btn-outline-danger" style="margin-left: 2px;" id="deleteButton"
                  (click)="secondConfirm(report)"><b>&cross;</b></button>
              </td>
            </div>
          </tr>
        </table>
    </div>
      

    <div id="secondConfirm" class="secondConfirm" style="display: none;">
        <div style="margin-top: 40px;">
            <h6>Möchtest du die Meldung von '<b>{{reportToDelete?.companyID}} vom {{reportToDelete?.reportDate}}</b>'
                wirklich löschen?</h6>
            <button class="btn btn-outline-danger" (click)="deleteReport( reportToDelete )">löschen bestätigen</button>
            <button class="btn btn-outline-dark" (click)="abortConfirm()" style="margin-left: 5px; ">abbbrechen</button>
        </div>
    </div>

</div>